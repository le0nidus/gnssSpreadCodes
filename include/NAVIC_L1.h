#include "Constellation.h"

constexpr int NAVIC_L1_PRIMARY_CODE_LENGTH = 10230;  // Each primary code of Pilot/Data components has the length 10230 chips.
constexpr int NAVIC_L1_SECONDARY_CODE_LENGTH = 1800;  // Pilot secondary has the length 1800 chips.

constexpr int GNAVIC_L1_PRIMARY_CODE_NUM_REGISTERS_R0R1 = 55;
constexpr int GNAVIC_L1_PRIMARY_CODE_NUM_REGISTERS_C = 5;
constexpr int GNAVIC_L1_OVERLAY_CODE_NUM_REGISTERS_R0R1 = 10;

constexpr int NAVIC_L1_NUMBER_OF_SATS = 64;		      //Total number of satellites

class NAVIC_L1 : public Constellation{
public:
    NAVIC_L1() {}

    void generateDataPrimary(int prn);
    void generatePilotPrimary(int prn);
    void generatePilotOverlay(int prn);

private:

    std::string getConstellationName() override { return "NAVIC L1"; }
    int getNumberOfSats() override { return NAVIC_L1_NUMBER_OF_SATS; }

    void generatePrimary(ULL initR0, ULL initR1, int initC);
    void shiftPrimary(std::vector<int> &regR0, std::vector<int> &regR1, std::vector<int> &regC);
    void shiftOverlay(std::vector<int> &regR0, std::vector<int> &regR1);
    
    const ULL L1_DATA_R0_Init[NAVIC_L1_NUMBER_OF_SATS] = {
        00061727026503255544ULL, 01660130752435362260ULL, 00676457016477551225ULL, 01763467705267605701ULL,
        01614265052776007236ULL, 01446113457553463523ULL, 01467417471470124574ULL, 00022513456555401603ULL,
        00004420115402210365ULL, 00072276243316574510ULL, 01632356715721616750ULL, 01670164755420300763ULL,
        01752127524253360255ULL, 00262220014044243135ULL, 01476157654546440020ULL, 01567545246612304745ULL,
        00341667641424721673ULL, 00627234635353763045ULL, 00422600144741165152ULL, 01661124176724621030ULL,
        01225124173720602330ULL, 01271773065617322065ULL, 00611751161355750124ULL, 00121046615341766266ULL,
        00337423707274604122ULL, 00246610305446052270ULL, 00427326063324033344ULL, 01127467544162733403ULL,
        00772425336125565156ULL, 01652465113031101044ULL, 01737622607214524550ULL, 01621315362240732407ULL,
        00171733204500613155ULL, 01462031354327077565ULL, 01141265411761074755ULL, 00665106277260231251ULL,
        00573123144343776027ULL, 00222101406610314705ULL, 00140673225434336401ULL, 00624233245727625631ULL,
        00224022145647544263ULL, 00222501602610354705ULL, 01370337660412244327ULL, 00563567347256715524ULL,
        01407636661116077143ULL, 01137431557133151004ULL, 01113003456475500265ULL, 01746553632646152413ULL,
        01465416631251321074ULL, 00130516430377202712ULL, 00762173527246302776ULL, 01606732407336425136ULL,
        01131112010066741562ULL, 01107467740060732403ULL, 00755500241327076744ULL, 01443037764170374631ULL,
        00243224434357700345ULL, 00445504023027564357ULL, 01211152271373271472ULL, 00256644102553071753ULL,
        00733312314424771412ULL, 01636376400221406415ULL, 00574114621235461516ULL, 01710717574016037362LL
    };

    const ULL L1_DATA_R1_Init[NAVIC_L1_NUMBER_OF_SATS] = {
        00377627103341647600ULL, 00047555332635133703ULL, 00570574070736102152ULL, 00511013576745450615ULL,
        01216243446624447775ULL, 00176452272675511054ULL, 00151055342317137706ULL, 01127720116046071664ULL,
        00514407436155575524ULL, 00253070462740453542ULL, 00573371306324706336ULL, 01315135317732077306ULL,
        01170303027726635012ULL, 01637171270537414673ULL, 00342370520251732111ULL, 00142423551056551362ULL,
        00641261355426453710ULL, 00237176034757345266ULL, 01205663360515365064ULL, 00725000004121104102ULL,
        00337367500320303262ULL, 01303374445022536530ULL, 01033071464007363115ULL, 00753124124237073577ULL,
        00133522075443754772ULL, 01244212514312345145ULL, 01066056211234322164ULL, 00073115240113351010ULL,
        01102260031574577224ULL, 01166703527236520553ULL, 00056062273631723177ULL, 00141517013160576212ULL,
        01644007677312431616ULL, 00201757033615262622ULL, 00357610362675720200ULL, 01637504174727237065ULL,
        01510345507743707753ULL, 00540160763721100120ULL, 00406415410457500342ULL, 00707515543554212732ULL,
        00140216674314371011ULL, 00445414471314273300ULL, 00120121661750263177ULL, 00477301251340044262ULL,
        01157040657040363676ULL, 01222265021477405004ULL, 00314661556545362364ULL, 00177320240371640542ULL,
        00735517310345570340ULL, 01367565551220511432ULL, 01274167141162675644ULL, 01543641015130470077ULL,
        00640733734534576460ULL, 00216312531021205434ULL, 00050232164401566177ULL, 00702636370401726111ULL,
        01733537351460015703ULL, 01523265651140460620ULL, 00607703231502460135ULL, 01757246242710445777ULL,
        00464412467237572274ULL, 01050617751566552643ULL, 01041606123021052264ULL, 01335441345250455042LL
    };

    const int L1_DATA_C_Init[NAVIC_L1_NUMBER_OF_SATS] = {
        0b10100, 0b10100, 0b00110, 0b10100, 0b10100, 0b00110, 0b10100, 0b00110,
        0b00110, 0b00110, 0b10100, 0b00110, 0b10100, 0b00110, 0b00110, 0b10100,
        0b00110, 0b00110, 0b00110, 0b00110, 0b10100, 0b10100, 0b10100, 0b00110,
        0b10100, 0b00110, 0b00110, 0b00110, 0b00110, 0b10100, 0b10100, 0b00110,
        0b10100, 0b00110, 0b00110, 0b00110, 0b10100, 0b10100, 0b01100, 0b00110,
        0b00011, 0b01100, 0b10100, 0b00110, 0b10100, 0b10100, 0b00110, 0b00110,
        0b00110, 0b10100, 0b10100, 0b10100, 0b00110, 0b10100, 0b00110, 0b10100,
        0b00110, 0b00110, 0b10100, 0b10010, 0b10001, 0b11000, 0b00110, 0b10100
    };

    const ULL L1_PILOT_R0_Init[NAVIC_L1_NUMBER_OF_SATS] = {
        00227743641272102303ULL, 00603070242564637717ULL, 00746325144437416120ULL, 00023763714573206044ULL,
        00155575663373106723ULL, 00022277536552741033ULL, 00137757627072411730ULL, 00413034001670700216ULL,
        00501123675324707024ULL, 00013727517464264567ULL, 00663351450332761127ULL, 01450710073416110356ULL,
        01716542347100366110ULL, 00743601273016301212ULL, 01454332372150500137ULL, 01473215015316613621ULL,
        01255535602164437613ULL, 01164537254033266174ULL, 01500537251137244274ULL, 00766727150471256024ULL,
        00457637114652202460ULL, 00436500136253056124ULL, 01666265767713037215ULL, 01465272157164065443ULL,
        00607440357166466472ULL, 01670202421463640077ULL, 01312661744614412524ULL, 01413034001672741216ULL,
        01113765722434040551ULL, 00621573414133237134ULL, 00526104310250410535ULL, 00426454733176070600ULL,
        01440644676733136472ULL, 00557275325702027456ULL, 00657637150553356442ULL, 01403560400557766512ULL,
        01531165662277124403ULL, 01403072012721162611ULL, 00541210077534050730ULL, 01660256422576622574ULL,
        00646767375467672136ULL, 01563301635027210017ULL, 01403462012723163611ULL, 00767233376550711053ULL,
        01260555130762307205ULL, 00531075060147161624ULL, 00112673710551347402ULL, 01314750013607403146ULL,
        00471706447643213002ULL, 00770352206645261362ULL, 00255127616022236737ULL, 01035616240477274125ULL,
        00251115713566666576ULL, 00752241454312660541ULL, 00461250256520434602ULL, 01116341217327713444ULL,
        00765232132271554573ULL, 00774370107303671123ULL, 01407140711055577677ULL, 01753355476331367516ULL,
        00101630163132222775ULL, 00730471404057577456ULL, 01336743247162047542ULL, 00020666576373544533LL
    };

    const ULL L1_PILOT_R1_Init[NAVIC_L1_NUMBER_OF_SATS] = {
        01667217344450257245ULL, 00300642746017221737ULL, 00474006332201753645ULL, 00613606702460402137ULL,
        01465531713404064713ULL, 01063646422557130427ULL, 01066060465055002004ULL, 00225574416605070652ULL,
        01733560674073230405ULL, 01116277147142260461ULL, 00152604753526345370ULL, 01110300535412261305ULL,
        01046105227571557243ULL, 01020346561064461527ULL, 01270052747201123510ULL, 01041553307136735706ULL,
        01002352163603013730ULL, 01362622514254366256ULL, 00556645716623157361ULL, 00020341533300021636ULL,
        01470231623730254774ULL, 01437100574634755567ULL, 00215346037247347710ULL, 01074246275146357122ULL,
        01655552356143710472ULL, 01067241424131022656ULL, 01611144345044137740ULL, 01235122601654653275ULL,
        00663754302501454556ULL, 00330540311241344370ULL, 01763277034331577303ULL, 01325110610226320770ULL,
        00632344657312671631ULL, 01432530060077160315ULL, 01272177170234542346ULL, 00043174152003062273ULL,
        00633575650312403065ULL, 00305021033755066410ULL, 00137373436464572225ULL, 00014331642301151614ULL,
        00444423305436737401ULL, 00232343171540161113ULL, 00101411166154322757ULL, 00501120665453153342ULL,
        01042475051720150775ULL, 01533531265037673325ULL, 00506620200211067675ULL, 01324133406103765602ULL,
        00203136107415235456ULL, 01521524233172031026ULL, 00164213410044443204ULL, 01221110757557452411ULL,
        00252317630101475044ULL, 00014540074363706135ULL, 00371711523526255275ULL, 00012400567546521471ULL,
        00312622351062337705ULL, 00023647344743400250ULL, 00257310611765747211ULL, 01540176212407214706ULL,
        01412637164262406706ULL, 00363125736302421243ULL, 00414175374460515677ULL, 00004500310276201661LL
    };

    const int L1_PILOT_C_Init[NAVIC_L1_NUMBER_OF_SATS] = {
        0b01000, 0b00000, 0b01000, 0b00000, 0b01000, 0b01000, 0b00000, 0b01000,
        0b00000, 0b00000, 0b00000, 0b01000, 0b01000, 0b00000, 0b00000, 0b00000,
        0b01000, 0b01000, 0b01000, 0b01000, 0b00000, 0b01000, 0b01000, 0b00000,
        0b01000, 0b00000, 0b01000, 0b00000, 0b00000, 0b00000, 0b00000, 0b01000,
        0b01000, 0b00000, 0b01000, 0b01000, 0b00110, 0b00000, 0b01010, 0b00110,
        0b00101, 0b10001, 0b00110, 0b00000, 0b10001, 0b00000, 0b00110, 0b00101,
        0b00110, 0b10010, 0b10001, 0b00011, 0b01000, 0b00000, 0b00000, 0b00101,
        0b10001, 0b00000, 0b01000, 0b00000, 0b00000, 0b10001, 0b00000, 0b01000
    };

    const int L1_PILOT_Overlay_R0_Init[NAVIC_L1_NUMBER_OF_SATS] = {
        0b0110111011, 0b0111101000, 0b1100000001, 0b0110110110, 0b0100011000, 0b0011111100, 0b0001100101, 0b1111000101,
        0b0011001100, 0b1000011010, 0b0001001001, 0b0110101011, 0b0101110000, 0b0010110011, 0b1110000111, 0b1000000000,
        0b1111101101, 0b1111101011, 0b0010001011, 0b0011101000, 0b0011011010, 0b0011111100, 0b0111001100, 0b1000101110,
        0b0101000010, 0b0000101010, 0b0000100001, 0b1000010000, 0b1011100100, 0b0110111111, 0b1001110000, 0b1101110101,
        0b0101111100, 0b1011001000, 0b1000001100, 0b0001100101, 0b0000000010, 0b0010100011, 0b1111010010, 0b0000100101,
        0b0100111011, 0b0110111001, 0b0010011101, 0b1000011010, 0b0010000010, 0b1001001111, 0b1111001111, 0b0010110010,
        0b0111111110, 0b0100100011, 0b0100001110, 0b0111101101, 0b1000010010, 0b1001001110, 0b0001011110, 0b1110001001,
        0b1110110001, 0b1101111110, 0b0111111000, 0b1010001111, 0b1100110100, 0b0011010010, 0b1101010100, 0b1001110110
    };

    const int L1_PILOT_Overlay_R1_Init[NAVIC_L1_NUMBER_OF_SATS] = {
        0b0100110000, 0b0110000010, 0b1110010001, 0b0101110011, 0b1011000110, 0b1010101111, 0b1110001000, 0b0001010000,
        0b1011111100, 0b0100010101, 0b1100000100, 0b0111011110, 0b1001110011, 0b1001101010, 0b0001100101, 0b0101101000,
        0b0111111011, 0b1001110001, 0b1101011001, 0b0111011110, 0b0011100101, 0b1101000001, 0b0110110001, 0b0011000001,
        0b1111100001, 0b0010011011, 0b0110011110, 0b0000111000, 0b0000000101, 0b0000100100, 0b0110101101, 0b1011010001,
        0b0001110111, 0b0110100111, 0b0111010101, 0b1110110101, 0b1011110110, 0b1011011010, 0b1100101010, 0b1101101111,
        0b1110011111, 0b1000100000, 0b0110000101, 0b0101111101, 0b0011110111, 0b1010001010, 0b1101000011, 0b1101101101,
        0b1011101001, 0b0100001100, 0b1001100010, 0b1100110011, 0b0011110101, 0b0100110100, 0b1110011000, 0b1000111100,
        0b0100010000, 0b0010011101, 0b1100011010, 0b0010011000, 0b0001001000, 0b0110001110, 0b0110101101, 0b1100011011
    };

};